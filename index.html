<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
</head>

<body>

    <h1>Naturviternes lønnsstatistikk</h1>

    <div id="container" style="width:100%; height:400px;"></div>

    <script>

      document.addEventListener('DOMContentLoaded', function () {

            fetch('/einar/data')
                .then((res) => res.json())
                .then((data) => {

                    let output = '<h2>Lønn</h2>'
                    
                    const privat = data.find(element => element["Sektor"] === 'Privat');
                    const stat = data.find(element => element["Sektor"] === 'Stat');
                    const kommune = data.find(element => element["Sektor"] === 'Kommune');

                    console.log("PRIVAT: ", privat['Gjennomsnittslønn']);
                    console.log("STAT: ", stat['Gjennomsnittslønn']);
                    console.log("KOMMUNE: ", kommune['Gjennomsnittslønn']);

                    let options = {
                        chart: {
                            renderTo: 'container',
                        },
                        title: {
                        text: 'Historisk lønnsutvikling etter sektor'
                        },
                        xAxis: {
                            categories: [2012, 2013, 2014, 2015, 2016, 2017, 2018]
                        },
                        yAxis: {
                            title: {
                                text: 'Lønn'
                            }
                        },
                        series: []
                    };

                    options.series.push({
                        name: 'Kommune',
                        data: [kommune['Gjennomsnittslønn'], 520000, 540000, 520000, 560000],
                        color: 'blue',
                    })

                     options.series.push({
                        name: 'Stat',
                        data: [stat['Gjennomsnittslønn'], 610000, 640000, 650000, 660000],
                        color: 'red',
                    })

                     options.series.push({
                        name: 'Privat',
                        data: [privat['Gjennomsnittslønn'], 500000, 520000, 540000, 600000, 620000],
                        color: 'green',
                    })

                    let chart = new Highcharts.Chart(options); 

                });
            });

    </script>

    <p><a href="/Lonn">Link til lønn</a></p>
</body>

</html>